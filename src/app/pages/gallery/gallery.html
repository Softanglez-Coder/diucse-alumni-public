<div class="gallery-page">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container mx-auto px-4">
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Gallery</h1>
      <p class="text-xl text-white/90 max-w-2xl">
        Explore our memories captured through photographs
      </p>
    </div>
  </section>

  <!-- Filter Section -->
  <section class="filter-section bg-white shadow-sm sticky top-0 z-10">
    <div class="container mx-auto px-4 py-4">
      <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
        <!-- Category Tabs -->
        <div class="flex flex-wrap gap-2">
          @for (cat of categories; track cat.value) {
            <button
              (click)="selectCategory(cat.value)"
              [class.active]="selectedCategory() === cat.value"
              class="category-btn"
            >
              {{ cat.label }}
            </button>
          }
        </div>

        <!-- Search Bar -->
        <div class="search-bar">
          <input
            type="text"
            placeholder="Search galleries..."
            (input)="onSearchChange($event)"
            [value]="searchTerm()"
            class="search-input"
          />
          <i class="pi pi-search search-icon"></i>
        </div>
      </div>
    </div>
  </section>

  <!-- Gallery Grid -->
  <section class="gallery-grid-section py-12">
    <div class="container mx-auto px-4">
      @if (isLoading()) {
        <div class="loading-container">
          <div class="spinner"></div>
          <p>Loading galleries...</p>
        </div>
      } @else if (filteredGalleries().length === 0) {
        <div class="empty-state">
          <i class="pi pi-images text-6xl text-gray-300 mb-4"></i>
          <h3 class="text-2xl font-semibold text-gray-600 mb-2">No Galleries Found</h3>
          <p class="text-gray-500">
            @if (searchTerm()) {
              Try adjusting your search or filters
            } @else {
              Check back later for new galleries
            }
          </p>
        </div>
      } @else {
        <div class="gallery-grid">
          @for (gallery of filteredGalleries(); track gallery._id) {
            <a [routerLink]="['/gallery', gallery._id]" class="gallery-card">
              <div class="gallery-card-image">
                <img
                  [src]="getCoverImage(gallery)"
                  [alt]="gallery.title"
                  loading="lazy"
                />
                <div class="gallery-card-overlay">
                  <div class="image-count">
                    <i class="pi pi-images"></i>
                    <span>{{ gallery.images.length || 0 }} Photos</span>
                  </div>
                </div>
              </div>
              <div class="gallery-card-content">
                <div class="flex items-center justify-between mb-2">
                  <span class="category-badge" [attr.data-category]="gallery.category">
                    {{ formatCategory(gallery.category) }}
                  </span>
                  <span class="date-badge">
                    {{ gallery.date | date: 'MMM d, yyyy' }}
                  </span>
                </div>
                <h3 class="gallery-title">{{ gallery.title }}</h3>
                <p class="gallery-description">
                  {{ gallery.description || 'View gallery' }}
                </p>
              </div>
            </a>
          }
        </div>
      }
    </div>
  </section>
</div>
