<div class="min-h-screen bg-gray-50 py-4 md:py-8">
    <div class="container mx-auto px-4 lg:px-6 xl:px-8">
        <!-- Back Button -->
        <div class="mb-6">
            <button
                (click)="goBack()"
                class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Members
            </button>
        </div>

        <!-- Loading State -->
        @if (loading()) {
            <div class="flex justify-center items-center py-20">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
                <span class="ml-4 text-lg text-gray-600">Loading member details...</span>
            </div>
        }

        <!-- Error State -->
        @else if (error()) {
            <div class="bg-red-50 border border-red-200 rounded-lg p-6 text-center">
                <i class="fas fa-exclamation-circle text-3xl text-red-500 mb-4"></i>
                <h2 class="text-xl font-semibold text-red-800 mb-2">{{ error() }}</h2>
                <p class="text-red-600 mb-4">We couldn't load the member details you requested.</p>
                <button
                    (click)="goBack()"
                    class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Go Back to Members
                </button>
            </div>
        }

        <!-- Member Details Content -->
        @else if (member()) {
            <div class="bg-white rounded-lg shadow-xl overflow-hidden">
                <!-- Header Section with Photo and Basic Info -->
                <div class="relative bg-gradient-to-r from-blue-600 to-purple-600 px-6 md:px-8 xl:px-12 py-8 md:py-12">
                    <div class="flex flex-col lg:flex-row items-center lg:items-start space-y-6 lg:space-y-0 lg:space-x-12">
                        <!-- Profile Photo -->
                        <div class="flex-shrink-0">
                            <div class="w-32 h-32 md:w-36 md:h-36 lg:w-40 lg:h-40 xl:w-44 xl:h-44 rounded-full overflow-hidden border-4 border-white shadow-lg">
                                <img
                                    [src]="getPhotoUrl(member()!.photo)"
                                    [alt]="member()!.name"
                                    class="w-full h-full object-cover">
                            </div>
                        </div>

                        <!-- Basic Info -->
                        <div class="flex-1 text-center lg:text-left text-white">
                            <h1 class="text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-3">{{ member()!.name }}</h1>

                            @if (member()!.membershipId) {
                                <div class="mb-4">
                                    <span class="inline-block bg-white/20 backdrop-blur-sm border-2 border-white/40 text-white text-sm md:text-base font-bold px-4 py-2 rounded-full tracking-wider font-mono shadow-lg">
                                        {{ member()!.membershipId }}
                                    </span>
                                </div>
                            }

                            <p class="text-lg md:text-xl lg:text-2xl text-blue-100 mb-3">{{ member()!.currentPosition }}</p>
                            <p class="text-base md:text-lg lg:text-xl text-blue-200 mb-6">{{ member()!.company }}</p>

                            <div class="flex flex-wrap justify-center lg:justify-start gap-2 md:gap-3">
                                <span class="inline-flex items-center px-3 md:px-4 py-2 rounded-full text-sm md:text-base font-medium bg-white/20 text-white">
                                    <i class="fas fa-graduation-cap mr-2"></i>
                                    Batch: {{ member()!.batch.name }}
                                </span>
                                @if (member()!.active) {
                                    <span class="inline-flex items-center px-3 md:px-4 py-2 rounded-full text-sm md:text-base font-medium bg-green-500/80 text-white">
                                        <i class="fas fa-check-circle mr-2"></i>
                                        Active Member
                                    </span>
                                }
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="p-4 md:p-6 lg:p-8">
                    <!-- Quick Stats Overview -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-blue-50 rounded-lg p-4 text-center">
                            <div class="text-lg md:text-xl font-bold text-blue-600 flex items-center justify-center mb-1">
                                <i class="fas fa-graduation-cap mr-2"></i>
                                {{ member()!.batch.name }}
                            </div>
                            <div class="text-sm text-gray-600">Batch</div>
                        </div>
                        <div class="bg-green-50 rounded-lg p-4 text-center">
                            <div class="text-lg md:text-xl font-bold text-green-600 flex items-center justify-center mb-1">
                                @if (member()!.active) {
                                    <i class="fas fa-check-circle mr-2"></i>
                                    Active
                                } @else {
                                    <i class="fas fa-times-circle mr-2"></i>
                                    Inactive
                                }
                            </div>
                            <div class="text-sm text-gray-600">Status</div>
                        </div>
                        <div class="bg-purple-50 rounded-lg p-4 text-center">
                            <div class="text-lg md:text-xl font-bold text-purple-600 flex items-center justify-center mb-1">
                                <i class="fas fa-calendar-alt mr-2"></i>
                                {{ member()!.createdAt | date:'yyyy' }}
                            </div>
                            <div class="text-sm text-gray-600">Joined</div>
                        </div>
                        <div class="bg-orange-50 rounded-lg p-4 text-center">
                            <div class="text-lg md:text-xl font-bold text-orange-600 flex items-center justify-center mb-1">
                                @if (member()!.emailVerified) {
                                    <i class="fas fa-shield-check mr-2"></i>
                                    Verified
                                } @else {
                                    <i class="fas fa-shield-exclamation mr-2"></i>
                                    Pending
                                }
                            </div>
                            <div class="text-sm text-gray-600">Email Status</div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 xl:grid-cols-4 gap-6 lg:gap-8">
                        <!-- Professional Information -->
                        <div class="xl:col-span-3 space-y-6">
                            <!-- Professional Details -->
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-briefcase text-blue-600 mr-3"></i>
                                    Professional Information
                                </h2>
                                <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Current Position</label>
                                        <p class="text-gray-900 font-medium">{{ member()!.currentPosition }}</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Company</label>
                                        <p class="text-gray-900 font-medium">{{ member()!.company }}</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Academic Information -->
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-university text-blue-600 mr-3"></i>
                                    Academic Information
                                </h2>
                                <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Batch</label>
                                        <p class="text-gray-900 font-medium">{{ member()!.batch.name }}</p>
                                    </div>
                                    @if (member()!.graduationYear) {
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Graduation Year</label>
                                            <p class="text-gray-900 font-medium">{{ member()!.graduationYear }}</p>
                                        </div>
                                    }
                                    @if (member()!.major) {
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Major</label>
                                            <p class="text-gray-900 font-medium">{{ member()!.major }}</p>
                                        </div>
                                    }
                                </div>
                            </div>

                            <!-- Bio Section -->
                            @if (member()!.bio) {
                                <div class="bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-6 md:p-8">
                                    <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                                        <i class="fas fa-user text-blue-600 mr-3"></i>
                                        About
                                    </h2>
                                    <p class="text-gray-700 leading-relaxed text-lg">{{ member()!.bio }}</p>
                                </div>
                            }
                        </div>

                        <!-- Contact Information Sidebar -->
                        <div class="space-y-6">
                            <!-- Contact Details -->
                            <div class="bg-white border-2 border-gray-200 rounded-lg p-6">
                                <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-address-book text-blue-600 mr-3"></i>
                                    Contact Information
                                </h2>

                                @if (canViewSensitiveInfo()) {
                                    <!-- Show contact info for members -->
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                            <button
                                                (click)="sendEmail(member()!.email)"
                                                class="flex items-center w-full p-3 text-left bg-gray-50 rounded-lg hover:bg-blue-50 hover:border-blue-200 border border-transparent transition-all duration-200 group">
                                                <i class="fas fa-envelope text-blue-600 mr-3 group-hover:text-blue-700"></i>
                                                <span class="text-gray-900 group-hover:text-blue-700 transition-colors duration-200 break-all">
                                                    {{ member()!.email }}
                                                </span>
                                                <i class="fas fa-external-link-alt ml-auto text-gray-400 group-hover:text-blue-600 text-xs"></i>
                                            </button>
                                        </div>

                                        @if (member()!.phone) {
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                                                <button
                                                    (click)="callPhone(member()!.phone)"
                                                    class="flex items-center w-full p-3 text-left bg-gray-50 rounded-lg hover:bg-green-50 hover:border-green-200 border border-transparent transition-all duration-200 group">
                                                    <i class="fas fa-phone text-green-600 mr-3 group-hover:text-green-700"></i>
                                                    <span class="text-gray-900 group-hover:text-green-700 transition-colors duration-200">
                                                        {{ member()!.phone }}
                                                    </span>
                                                    <i class="fas fa-external-link-alt ml-auto text-gray-400 group-hover:text-green-600 text-xs"></i>
                                                </button>
                                            </div>
                                        }

                                        @if (member()!.location) {
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                                                <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                                    <i class="fas fa-map-marker-alt text-blue-600 mr-3"></i>
                                                    <span class="text-gray-900">{{ member()!.location }}</span>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                } @else {
                                    <!-- Show restricted message for non-members -->
                                    <div class="text-center py-6">
                                        <i class="fas fa-lock text-4xl text-gray-400 mb-4"></i>
                                        <h3 class="text-lg font-medium text-gray-900 mb-2">Contact Information Restricted</h3>
                                        <p class="text-gray-600 text-sm mb-4">
                                            Contact details are only visible to registered members.
                                        </p>
                                        <a
                                            href="/membership"
                                            class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200">
                                            <i class="fas fa-user-plus mr-2"></i>
                                            Become a Member
                                        </a>
                                    </div>
                                }
                            </div>

                            <!-- Member Stats -->
                            <div class="bg-white border-2 border-gray-200 rounded-lg p-6">
                                <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-chart-line text-blue-600 mr-3"></i>
                                    Member Since
                                </h2>
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-blue-600 mb-1">
                                        {{ member()!.createdAt | date:'MMM yyyy' }}
                                    </div>
                                    <p class="text-sm text-gray-600">Joined the community</p>
                                </div>
                            </div>

                            <!-- Account Status -->
                            <div class="bg-white border-2 border-gray-200 rounded-lg p-6">
                                <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-shield-alt text-blue-600 mr-3"></i>
                                    Account Status
                                </h2>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Account Status</span>
                                        @if (member()!.active) {
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                <i class="fas fa-check-circle mr-1"></i>
                                                Active
                                            </span>
                                        } @else {
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                <i class="fas fa-times-circle mr-1"></i>
                                                Inactive
                                            </span>
                                        }
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Email Verified</span>
                                        @if (member()!.emailVerified) {
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                <i class="fas fa-check-circle mr-1"></i>
                                                Verified
                                            </span>
                                        } @else {
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                                <i class="fas fa-clock mr-1"></i>
                                                Pending
                                            </span>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>